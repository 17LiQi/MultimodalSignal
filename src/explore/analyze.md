***

### 1. WESAD 数据集概述
WESAD（Wearable Stress and Affect Detection）是一个用于研究压力和情感检测的多模态数据集，包含从胸部和腕部传感器收集的生理信号，以及主观问卷数据。

Jupyter 文件主要分析了受试者 S2 的 `.pkl` 文件和对应的主观问卷 `.csv` 文件，探索了数据结构、信号特征和标签分布。

以下是对数据集的整合分析，分为数据结构、信号分析、标签分布和主观问卷四个部分。

***

### 2. 数据结构分析

#### 数据加载与结构
- **文件路径**：`MultimodalSignal\WESAD\S2\S2.pkl`
- **数据类型**：`pkl_data` 是一个字典，包含以下顶级键：
  - `b'signal'`: 包含胸部（`b'chest'`）和腕部（`b'wrist'`）的传感器数据。
  - `b'label'`: 包含时间序列的标签数组。
  - `b'subject'`: 受试者标识，值为 `b'S2'`。

#### 信号数据
- **`b'signal'`** 包含两个子字典：
  - **`b'chest'`**（胸部传感器）：
    - `b'ACC'`：加速度计数据，形状 `(4255300, 3)`，类型 `float64`。
    - `b'ECG'`：心电图数据，形状 `(4255300, 1)`，类型 `float64`。
    - `b'EMG'`：肌电图数据，形状 `(4255300, 1)`，类型 `float64`。
    - `b'EDA'`：皮肤电反应数据，形状 `(4255300, 1)`，类型 `float64`。
    - `b'Temp'`：温度数据，形状 `(4255300, 1)`，类型 `float32`。
    - `b'Resp'`：呼吸数据，形状 `(4255300, 1)`，类型 `float64`。
  - **`b'wrist'`**（腕部传感器）：
    - `b'ACC'`：加速度计数据，形状 `(194528, 3)`，类型 `float64`。
    - `b'BVP'`：血容量脉冲数据，形状 `(389056, 1)`，类型 `float64`。
    - `b'EDA'`：皮肤电反应数据，形状 `(24316, 1)`，类型 `float64`。
    - `b'TEMP'`：温度数据，形状 `(24316, 1)`，类型 `float64`。

#### 标签数据
- **`b'label'`**：一个形状为 `(4255300,)` 的 `int32` 数组，包含标签值（0 到 7），与胸部信号的时间步长一致。
- **标签分布**（通过 `Counter` 统计）：
  ```
  Counter({0: 2142701, 1: 800800, 4: 537599, 2: 430500, 3: 253400, 6: 45500, 7: 44800})
  ```
  - 标签 0（基线状态）占主导，约 214.27 万个样本。
  - 其他标签（如 1: TSST、2: Fun、3: Medi、4: Medi 2、6: sRead、7: fRead）样本量较少，反映不同任务的持续时间不同。

#### 主观问卷数据
- **文件路径**：`MultimodalSignal\WESAD\S2\S2_quest.csv`
- **内容**：CSV 文件记录了受试者 S2 在不同任务（Base, TSST, Medi 1, Fun, Medi 2, sRead, fRead）中的主观评分，基于以下量表：
  - **PANAS**（正负情感量表）：评估积极和消极情感。
  - **STAI**（状态-特质焦虑量表）：评估焦虑水平。
  - **DIM**：可能与维度情感评估相关。
  - **SSSQ**：压力状态问卷。
- **数据格式**：分号分隔的表格，包含任务顺序、开始/结束时间和评分数据。

***

### 3. 信号特征分析
你的代码对胸部和腕部信号进行了统计分析，计算了每个信号的最小值、最大值、均值和标准差。以下是关键发现：

#### 胸部信号（`b'chest'`）
| 信号 | 形状 | 类型 | 最小值 | 最大值 | 均值 | 标准差 |
|------|-------------|---------|---------------------|---------------------|----------|----------|
| `b'ACC'` | `(4255300, 3)` | `float64` | -1.1354 | 2.0298 | 0.0660 | 0.5405 |
| `b'ECG'` | `(4255300, 1)` | `float64` | -1.4995 | 1.4993 | 0.0012 | 0.1541 |
| `b'EMG'` | `(4255300, 1)` | `float64` | -0.4150 | 0.3010 | -0.0024 | 0.0117 |
| `b'EDA'` | `(4255300, 1)` | `float64` | 0.2632 | 7.5768 | 1.5284 | 1.2384 |
| `b'Temp'` | `(4255300, 1)` | `float32` | 28.0453 | 34.3704 | 30.8767 | 1.2811 |
| `b'Resp'` | `(4255300, 1)` | `float64` | -27.9037 | 27.3788 | 0.0549 | 2.9177 |

**观察**：
- **ACC**：加速度数据有三个轴，范围在 [-1.1354, 2.0298]，标准差较大（0.5405），表明运动变化明显。
- **ECG**：心电图数据范围在 [-1.4995, 1.4993]，均值接近 0，表明数据可能经过归一化处理。
- **EDA**：皮肤电反应数据范围较广（0.2632 到 7.5768），反映出皮肤电活动在不同任务中的变化。
- **Temp**：温度数据范围为 28.05°C 到 34.37°C，符合人体皮肤温度范围。
- **Resp**：呼吸数据波动较大（-27.9037 到 27.3788），可能与呼吸深度或传感器灵敏度有关。

#### 腕部信号（`b'wrist'`）
| 信号 | 形状 | 类型 | 最小值 | 最大值 | 均值 | 标准差 |
|------|-------------|---------|---------------------|---------------------|----------|----------|
| `b'ACC'` | `(194528, 3)` | `float64` | -128.0 | 127.0 | 19.4282 | 31.1639 |
| `b'BVP'` | `(389056, 1)` | `float64` | -873.67 | 988.08 | -0.0004 | 75.8712 |
| `b'EDA'` | `(24316, 1)` | `float64` | 0.0451 | 1.7174 | 0.3917 | 0.3292 |
| `b'TEMP'` | `(24316, 1)` | `float64` | 32.31 | 35.97 | 34.3869 | 1.0453 |

**观察**：
- **ACC**：腕部加速度范围 [-128, 127]，幅度远大于胸部，可能是由于腕部传感器量程或单位不同。
- **BVP**：血容量脉冲数据波动极大（-873.67 到 988.08），标准差高达 75.8712，可能需要进一步预处理（如滤波）。
- **EDA** 和 **TEMP**：腕部信号采样率较低（`24316` 样本），数据范围较窄，反映腕部传感器精度或采样频率较低。

#### ECG 数据对比
代码还比较了 `.pkl` 文件中 ECG 数据和 `.txt` 文件中 CH1 数据的范围：
- **PKL (ECG)**：最小值 -1.4995，最大值 1.4993（归一化数据）。
- **TXT (CH1)**：最小值 10，最大值 65521（原始未处理数据，可能为 ADC 采样值）。

**分析**：
- `.pkl` 文件的 ECG 数据已经过预处理（归一化到 [-1.5, 1.5]），可直接用于分析。
- `.txt` 文件的 CH1 数据是原始信号，范围较大，是未校准的 原始传感器输出。

***

### 4. 标签分布
你的代码通过 `Counter` 和 `plt.bar` 可视化了标签分布：
- **标签含义**（基于 WESAD 数据集文档）：
  - 0: 基线（Baseline）
  - 1: 压力（TSST，Trier Social Stress Test）
  - 2: 娱乐（Fun）
  - 3: 冥想 1（Medi 1）
  - 4: 冥想 2（Medi 2）
  - 6: 社会阅读（sRead）
  - 7: 自由阅读（fRead）
- **分布**：
  - 标签 0（基线）占 50.3%（2142701/4255300），表明基线状态数据最多。
  - 标签 1（压力，TSST）占 18.8%，标签 4（Medi 2）占 12.6%，标签 2（Fun）占 10.1%，其他标签比例较低。
- **可视化**：你的代码生成了一个柱状图，显示标签 0 的样本量远超其他标签，反映了实验设计中基线状态的持续时间较长。

**建议**：
- 由于标签分布不平衡（标签 0 占主导），在机器学习建模时可能需要处理类别不平衡问题（如过采样、欠采样或加权损失函数）。
- 可进一步分析不同标签对应的信号特征（例如，TSST 期间的 EDA 是否显著升高）。

***

### 5. 主观问卷数据
你的代码读取了 `S2_quest.csv`，以下是关键信息：

#### 数据内容
- **任务顺序与时间**：
  - Base: 7.08–26.32 分钟
  - TSST: 39.55–50.3 分钟
  - Medi 1: 70.19–77.1 分钟
  - Fun: 81.25–87.47 分钟
  - Medi 2: 93.38–100.15 分钟
  - sRead: 54.42–56.07 分钟
  - fRead: 89.51–91.15 分钟
- **评分数据**：
  - **PANAS**：评分范围为 1–4，TSST 和 Medi 1 任务中的某些情感评分较高（例如，列 17 中 TSST 和 Medi 1 评分均为 4）。
  - **STAI**：焦虑评分在不同任务中变化，例如 TSST 任务中评分较低（1–3），而 Fun 和 Medi 2 任务中较高（4）。
  - **DIM** 和 **SSSQ**：提供了额外的维度评分和压力评分，TSST 任务中 DIM 评分较低（1–2），表明压力状态下情感强度较低。

#### 分析
- **任务时长**：基线（约 19 分钟）和 TSST（约 11 分钟）持续时间较长，sRead 和 fRead 较短（约 1–2 分钟）。
- **情感与压力**：TSST 任务（压力测试）中，PANAS 和 STAI 评分显示受试者 S2 感受到一定的情感和焦虑变化，而 Fun 和 Medi 任务评分较高，可能反映积极情感或放松状态。
- **数据格式问题**：CSV 文件包含大量空值（例如，列 18–26 部分为空），可能需要进一步清洗以提取有效信息。

***

### 6. 综合
#### 数据集特征
- **多模态性**：WESAD 数据集包含多种生理信号（ACC、ECG、EMG、EDA、Temp、Resp、BVP）和主观问卷数据，适合研究压力和情感的生理表现。
- **采样率差异**：
  - 胸部信号采样率较高（4255300 样本，约 700 Hz，假设实验持续约 100 分钟）。
  - 腕部信号采样率较低（例如，EDA 和 TEMP 为 4 Hz，BVP 为 64 Hz，ACC 为 32 Hz）。
- **标签与任务**：标签对应实验中的不同任务，基线数据占主导，压力（TSST）和娱乐（Fun）任务数据量较多。
- **主观数据**：问卷数据提供了受试者的主观情感和压力评分，可与生理信号结合分析。

***

### 7. 总结
你的 Jupyter 文件对 WESAD 数据集的 S2 受试者数据进行了详细探索，揭示了数据集的多模态结构、信号特征和标签分布。以下是关键点：
- **数据结构**：包含胸部和腕部生理信号、标签和主观问卷数据，信号采样率和范围各异。
- **信号特征**：胸部信号高频、腕部信号低频，ECG 和 BVP 数据需进一步预处理。
- **标签分布**：基线数据占主导，需注意类别不平衡问题。
- **主观问卷**：提供了任务时间和情感/压力评分，可与生理信号结合分析。

**下一步计划**：
- 寻找论文及其研究思路
- 选择合适的特征进行特征提取和建模

